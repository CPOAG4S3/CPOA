CREATE OR REPLACE TRIGGER TR_BILLETS BEFORE UPDATE OF VENDU OR INSERT 
ON BILLETS 
FOR EACH ROW
IF INSERTING
THEN
	UPDATE TABLE ZONE SET DISPO = NEW.TOTAL, VENDU = 0 
		WHERE COURT = NEW.COURT 
		AND DATE = NEW.DATE 
		AND ZONE = NEW.ZONE;
ELIF UPDATING
THEN
	UPDATE TABLE ZONE SET DISPO = OLD.DISPO + (NEW.VENDU - OLD.VENDU)
		WHERE COURT = NEW.COURT
		AND DATE = NEW.DATE
		AND ZONE = NEW.ZONE;
END IF